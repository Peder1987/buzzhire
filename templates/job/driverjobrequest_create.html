{% extends 'account/dashboard_base.html' %}
{% load crispy_forms_tags %}

{% block extrascripts %}
    {{ block.super }}
    {% include 'includes/forms/datetime_form_js.html' %}
    <script type='text/javascript'>
        $(function() {
            var delivery_box_wrapper = $('#div_id_minimum_delivery_box');
            var vehicle_type_radios = $('input[name="vehicle_type"]');
            var own_vehicle_checkbox = $('input#id_own_vehicle');          

            function update_delivery_box_field() {
            	// If the vehicle type involves a delivery box, and the driver must
            	// supply their own vehicle, show the minimum delivery box field
            	if (own_vehicle_checkbox.is(':checked') && $('input[name="vehicle_type"]:checked').data('delivery-box-applicable')) {
            		delivery_box_wrapper.show('fast');        
                }
                else {
                    delivery_box_wrapper.hide('fast');
                }
            }
            
            // Bind the delivery box field to changes to the two relevant fields
            vehicle_type_radios.change(update_delivery_box_field);
            own_vehicle_checkbox.change(update_delivery_box_field);
        	// Show/hide the delivery box field based on initial values
            update_delivery_box_field();
        });
        
    </script>
{% endblock %}